<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <input class="content" type="text">
  <button class="btn">click to get value</button>

  <script>

    // 不是纯函数
    /* var a = 1;

    function test() {
      console.log(a)
    }
    test()
    */
    /*
    function test(a) {
      console.log(a)
    }
    test(1)
    */


    /*
    // 依赖外界变量 改变DOM 
    var content = document.getElementsByClassName('content')[0];
    var btn = document.getElementsByClassName('btn')[0];

    btn.onclick = function() {
      var value = content.value
      console.log(value)
    }
    */
    /*
    // 改变外部变量的值
    var a = 1;
    function test() {
      return a = a - 1;
    }
    console.log(test()) // 0

    */
    /*
    function add(obj) {
      return obj.a + obj.b;
    }

    function minus(obj) {
      return obj.a - obj.b;
    }

    // function compute(nums) {
    //   console.log(add(nums))
    //   console.log(minus(nums))
    // }
    function compute(nums) {
     return {
       add: add(nums),
       minus: minus(nums)
     }
    }

    const numberObj = {
      a: 10,
      b: 5
    }
    compute(numberObj); // 15 5
    */

    // 定义两个数组

/*     const arr1 = ['a', 'b','c', 'd', 'e'];
    const arr2 = ['a', 'b','c', 'd', 'e'];

    const spArr = arr1.splice(0,3);  // 副作用
    const slArr = arr1.slice(0,3); // 无副作用

    console.log('arr1: ' + arr1); // d, e
    console.log('spArr: ' + spArr); // a,b,c

    console.log('arr2: ' + arr2); // a,b,c,d,e
    console.log('slArr: ' + slArr); // d,e */

    // 对象  更改了原对象 不纯
   /*  var obj = {
      a: 1,
      b: 2,
      c: 3
    }

    function test() {
      obj.d = 4;
    }
    test();
    console.log(obj); // {a: 1, b: 2, c: 3, d: 4}
 */

    // 可移植性

/*     function compute(a, b, type) {
      if(typeof a === 'number' && typeof b === 'number') {
        switch (type) {
          case 'add' :
            return a + b;
            break;
          case 'minus':
            return a - b;
            break;
          case 'multi':
            return a * b;
            break;
          case 'div':
            return a / b;
            break;
          defaul: 
            return a + b;
        }
      } else {
        return 'a 和 b 必须是数字'
      }
    }
    console.log(compute(10, 5, 'multi')) */

    // 做缓存池
    /* function test(fn) {
      var cache = {};
      return function() {
        var args = JSON.stringify(arguments);
        cache[args] = cache[args] ? cache[args] + '(来自缓存池)' : fn(arguments);
        return cache[args];
      }
    }

    var add = test(function(arguments) {
      var argLen = arguments.length;
      var item = null;
      var res = 0;

      for(var i = 0; i < argLen; i ++) {
        item = arguments[i];
        res += item;
      }
      return res;
    })

    console.log(add(1,2))
    console.log(add(1,2))
    console.log(add(1,3))
    console.log(add(1,3))
 */

  function test(fn) {
    var cache = {};
    return function() {
      var args = JSON.stringify(arguments);
      cache[args] = cache[args] 
        ? cache[args] + '(来自缓存池)' 
        : fn.apply(fn, arguments);
      return cache[args];
    }
  }

  var add = test(function() {
    var argLen = arguments.length;
    var item = null;
    var res = 0;

    for(var i = 0; i < argLen; i ++) {
      item = arguments[i];
      res += item;
    }
    return res;
  })

  console.log(add(1,2))
  console.log(add(1,2))
  console.log(add(1,3))
  console.log(add(1,3))


      btn.onclick = function() {
        content.value = 'this is new value'
      }
      
      // 不是纯函数

      var a = 1;
      function test() {
        a = a -1
      }
      test()
      console.log(a)
  
      
      // function
  </script>
</body>
</html>